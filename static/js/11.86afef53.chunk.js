(this["webpackJsonpreact-muji-gallery"]=this["webpackJsonpreact-muji-gallery"]||[]).push([[11],{253:function(e,t,n){"use strict";n.r(t);var r,c,i,a,l,s,j=n(0),d=n(141),h=n(29),b=n(77),o=n(249),g=n(251),u=n(97),x=n(159),p=n(252),O=n(255),f=n(76),m=n(17),w=n(30),v=n(5),S=o.a.Dragger,F=w.a.div(r||(r=Object(h.a)(["\n  margin-top: 30px;\n  border: 1px solid #ccc;\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 4px;\n\n"]))),k=w.a.h1(c||(c=Object(h.a)(["\n  text-align: center;\n"]))),U=w.a.img(i||(i=Object(h.a)(["\n  max-width: 300px;\n"]))),y=Object(w.a)(S)(a||(a=Object(h.a)(["\n  background: rgba(0, 0, 0, 0.4) !important;\n  border: 1px solid !important;\n  box-shadow: 0 5px 5px -3px rgb(0 0 0 / 20%), 0 8px 10px 1px rgb(0 0 0 / 14%), 0 3px 14px 2px rgb(0 0 0 / 12%);\n\n  .ant-upload-text {\n    color: #fff !important;\n  }\n\n  .ant-upload-hint {\n    color: #ccc !important;\n  }\n"]))),N=Object(w.a)(g.a)(l||(l=Object(h.a)(["\n  height: 40px;\n\n  > div {\n    display: inline-block;\n  }\n"]))),$=Object(f.a)((function(){var e=Object(b.a)(),t=e.ImageStore,n=e.UserStore,r={showUploadList:!1,beforeUpload:function(e){return t.serverFile=null,n.currentUser?/(gif$)| (jeg$)|(png$)|(jpeg$)/gi.test(e.type)?e.size>1048576?(u.b.error("\u56fe\u7247\u6700\u5927\u4e3a 1M"),!1):(t.setFile(e),t.setFileName(e.name),t.upload().then((function(e){return console.log(e)})).catch((function(e){return console.log("\u4e0a\u4f20\u5931\u8d25\uff1a"+e)})),!1):(u.b.error("\u53ea\u652f\u6301\u4e0a\u4f20 jpg/jpeg/png/gif \u683c\u5f0f\u7684\u56fe\u7247"),!1):(u.b.warning("\u8bf7\u5148\u767b\u5f55 !"),!1)}},c=Object(j.useRef)(),i=Object(j.useRef)(),a=Object(m.d)((function(){return{width:null,height:null,get widthStr(){return a.width?"/w/".concat(a.width):""},get heightStr(){return a.height?"/h/".concat(a.height):""},get fullStr(){return t.serverFile.attributes.url.attributes.url+"?imageView2/0"+a.widthStr+a.heightStr},setWidth:function(e){a.width=e},setHeight:function(e){a.height=e}}}));var l=function(e,t){return/^[0-9]*$/.test(t)?Promise.resolve():Promise.reject("\u53ea\u80fd\u662f\u6570\u5b57")};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(x.a,{spinning:t.isUploading,children:Object(v.jsxs)(y,Object(d.a)(Object(d.a)({},r),{},{children:[Object(v.jsx)("p",{className:"ant-upload-drag-icon",children:Object(v.jsx)(O.a,{})}),Object(v.jsx)("p",{className:"ant-upload-text",children:"\u5355\u51fb\u6216\u62d6\u52a8\u6587\u4ef6\u5230\u6b64\u533a\u57df\u4ee5\u4e0a\u4f20"}),Object(v.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301jpg/jpeg/png/gif \u683c\u5f0f\u7684\u56fe\u7247,\u53ef\u5355\u6b21\u6216\u6279\u91cf\u4e0a\u4f20\u3002"})]}))}),t.serverFile?Object(v.jsxs)(F,{children:[Object(v.jsx)(k,{children:"\u4e0a\u4f20\u7ed3\u679c"}),Object(v.jsxs)("dl",{children:[Object(v.jsx)("dt",{children:Object(v.jsx)("h2",{children:"\u6587\u4ef6\u540d\uff1a"})}),Object(v.jsx)("dd",{children:t.fileName}),Object(v.jsx)("dt",{children:Object(v.jsx)("h2",{children:"\u56fe\u7247\u9884\u89c8\uff1a"})}),Object(v.jsx)("dd",{children:Object(v.jsx)(U,{src:t.serverFile.attributes.url.attributes.url,alt:""})}),Object(v.jsx)("dt",{children:Object(v.jsx)("h2",{children:"\u5c3a\u5bf8\u4fee\u6539\uff1a"})}),Object(v.jsx)("dd",{children:Object(v.jsxs)(N,{name:"basic",children:[Object(v.jsx)(g.a.Item,{name:"width",rules:[{validator:l}],children:Object(v.jsx)(p.a,{style:{width:"200px",marginRight:"16px"},ref:c,onChange:function(e){a.setWidth(e.target.value)},placeholder:"\u6700\u5927\u5bbd\u5ea6\uff08\u53ef\u9009\uff09"})}),Object(v.jsx)(g.a.Item,{name:"height",rules:[{validator:l}],children:Object(v.jsx)(p.a,{style:{width:"200px"},ref:i,onChange:function(e){a.setHeight(e.target.value)},placeholder:"\u6700\u5927\u9ad8\u5ea6\uff08\u53ef\u9009\uff09"})})]})}),Object(v.jsx)("dt",{children:Object(v.jsx)("h2",{children:"\u4fdd\u5b58\u5730\u5740\uff1a"})}),Object(v.jsx)("dd",{children:Object(v.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:a.fullStr,children:a.fullStr})})]})]}):null]})})),I=w.a.div(s||(s=Object(h.a)(["\n  background: rgba(252, 0, 0, 0.5);\n  padding: 10px;\n  margin: 30px 0;\n  color: white;\n  border-radius: 4px;\n  font-weight: bold;\n"]))),R=Object(f.a)((function(e){var t=e.children,n=Object(b.a)().UserStore;return Object(v.jsx)(v.Fragment,{children:n.currentUser?null:Object(v.jsx)(I,{children:t})})}));t.default=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R,{children:"\u8bf7\u767b\u9646\u540e\u4f7f\u7528"}),Object(v.jsx)($,{})]})}}}]);
//# sourceMappingURL=11.86afef53.chunk.js.map