{"version":3,"sources":["constants/formLayout.js","view/Register.js"],"names":["Wrapper","styled","div","layout","labelCol","span","wrapperCol","tailLayout","offset","Component","observer","AuthStore","useStore","history","useHistory","name","onFinish","values","setUsername","username","setPassword","password","register","then","r","console","log","push","catch","onFinishFailed","errorInfo","Item","label","rules","required","message","validator","rule","value","test","Promise","reject","length","resolve","min","Password","getFieldValue","type","htmlType"],"mappings":"oPAEMA,E,MAAUC,EAAOC,IAAV,iRASPC,EAAS,CACbC,SAAU,CAACC,KAAM,GACjBC,WAAY,CAACD,KAAM,KAEfE,EAAa,CACjBD,WAAY,CAACE,OAAQ,EAAGH,KAAM,M,+HCT1BI,EAAYC,aAAS,WAAO,IACzBC,EAAaC,cAAbD,UACDE,EAAUC,cA4BhB,OACE,eAAC,IAAD,WACE,8CACA,eAAC,IAAD,2BAAUX,KAAV,IACMY,KAAK,QACLC,SAhCO,SAACC,GAChBN,EAAUO,YAAYD,EAAOE,UAC7BR,EAAUS,YAAYH,EAAOI,UAC7BV,EAAUW,WACPC,MAAK,SAAAC,GACJC,QAAQC,IAAI,qDACZb,EAAQc,KAAK,QAEdC,OAAM,kBAAMH,QAAQC,IAAI,gCAyBnBG,eAtBa,SAACC,GACtBL,QAAQC,IAAI,UAAWI,IAkBrB,UAKE,cAAC,IAAKC,KAAN,CACEC,MAAM,qBACNjB,KAAK,WACLkB,MAAO,CAAC,CAACC,UAAU,EAAMC,QAAS,kCAC9B,CAACC,UAxBa,SAACC,EAAMC,GAC/B,MAAI,KAAKC,KAAKD,GAAgBE,QAAQC,OAAO,gEACzCH,EAAMI,OAAS,GAAKJ,EAAMI,OAAS,GAAYF,QAAQC,OAAO,4CAC3DD,QAAQG,aAiBX,SAOE,cAAC,IAAD,MAGF,cAAC,IAAKZ,KAAN,CACEC,MAAM,eACNjB,KAAK,WACLkB,MAAO,CAAC,CAACC,UAAU,EAAMC,QAAS,4BAChC,CAACS,IAAK,EAAGT,QAAS,gDAJtB,SAOE,cAAC,IAAMU,SAAP,MAEF,cAAC,IAAKd,KAAN,CACEC,MAAM,2BACNjB,KAAK,kBACLkB,MAAO,CAAC,CAACC,UAAU,EAAMC,QAAS,4BArClB,SAAC,GAAD,IAAEW,EAAF,EAAEA,cAAF,MAAsB,CAC5CV,UAD4C,SAClCC,EAAMC,GACd,OAAIQ,EAAc,cAAgBR,EAAeE,QAAQG,UAClDH,QAAQC,OAAO,kDA+BpB,SAKE,cAAC,IAAMI,SAAP,MAGF,cAAC,IAAKd,KAAN,2BAAexB,KAAf,aACE,cAAC,IAAD,CAAQwC,KAAK,UAAUC,SAAS,SAAhC,uCASKvC","file":"static/js/8.e6e4c902.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 900px;\r\n  margin: 120px auto;\r\n  border-radius: 4px;\r\n  padding: 20px;\r\n  box-shadow: 0 5px 5px -3px rgb(0 0 0 / 0%), 0 8px 10px 1px rgb(0 0 0 / 0%), 0 3px 14px 2px rgb(0 0 0 / 10%);\r\n  background: #eee;\r\n  border: 1px solid #eee;\r\n`\r\nconst layout = {\r\n  labelCol: {span: 4},\r\n  wrapperCol: {span: 16},\r\n}\r\nconst tailLayout = {\r\n  wrapperCol: {offset: 4, span: 16},\r\n}\r\nexport {Wrapper,layout,tailLayout}\r\n","import React from 'react'\r\nimport {observer} from 'mobx-react'\r\nimport {Button, Form, Input} from 'antd'\r\nimport {Wrapper, layout, tailLayout} from '../constants/formLayout'\r\nimport useStore from '../stores'\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nconst Component = observer(() => {\r\n  const {AuthStore} = useStore()\r\n  const history = useHistory()\r\n  const onFinish = (values) => {\r\n    AuthStore.setUsername(values.username)\r\n    AuthStore.setPassword(values.password)\r\n    AuthStore.register()\r\n      .then(r => {\r\n        console.log('注册成功,跳转首页')\r\n        history.push('/')\r\n      })\r\n      .catch(() => console.log('注册失败'))\r\n  }\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo)\r\n  }\r\n\r\n  const validatorUsername = (rule, value) => {\r\n    if (/\\W/.test(value)) {return Promise.reject('只能是数字字母下划线')}\r\n    if (value.length < 4 || value.length > 10) {return Promise.reject('长度为4~10个字符')}\r\n    return Promise.resolve()\r\n  }\r\n  const validateConfirm = ({getFieldValue}) => ({\r\n    validator(rule, value) {\r\n      if (getFieldValue('password') === value) {return Promise.resolve()}\r\n      return Promise.reject('两次密码不一致')\r\n    }\r\n  })\r\n\r\n  return (\r\n    <Wrapper>\r\n      <h1>注册</h1>\r\n      <Form {...layout}\r\n            name=\"basic\"\r\n            onFinish={onFinish}\r\n            onFinishFailed={onFinishFailed}\r\n      >\r\n        <Form.Item\r\n          label=\"用户名\"\r\n          name=\"username\"\r\n          rules={[{required: true, message: '输入用户名'}\r\n            , {validator: validatorUsername}\r\n          ]}\r\n        >\r\n          <Input/>\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"密码\"\r\n          name=\"password\"\r\n          rules={[{required: true, message: '输入密码'},\r\n            {min: 6, message: '最小长度6个字符'}\r\n          ]}\r\n        >\r\n          <Input.Password/>\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"确认密码\"\r\n          name=\"confirmPassword\"\r\n          rules={[{required: true, message: '确认密码'}, validateConfirm]}\r\n        >\r\n          <Input.Password/>\r\n        </Form.Item>\r\n\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            提交\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Wrapper>\r\n  )\r\n})\r\n\r\nexport default Component\r\n"],"sourceRoot":""}