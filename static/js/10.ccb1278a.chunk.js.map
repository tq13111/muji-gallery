{"version":3,"sources":["components/History.js","view/History.js"],"names":["LoadingContainer","styled","div","Message","Nav","A","a","ImgList","List","Component","observer","HistoryStore","useStore","useEffect","reset","pageStart","page","loadMore","pullList","hasMore","isLoading","useWindow","dataSource","list","renderItem","item","Item","src","attributes","url","style","height","alt","filename","dayjs","createdAt","toISOString","format","target","href","type","danger","onClick","remove","id","History"],"mappings":"mQAQMA,EAAmBC,IAAOC,IAAV,2GAMhBC,EAAUF,IAAOC,IAAV,mEAIPE,EAAMH,IAAOC,IAAV,oFAKHG,EAAIJ,IAAOK,EAAV,gJAODC,EAAUN,YAAOO,IAAPP,CAAH,mSAuDEQ,EA7CGC,aAChB,WAAO,IACEC,EAAgBC,cAAhBD,aAMP,OAHAE,qBAAU,WACRF,EAAaG,UACZ,CAACH,IAEF,cAAC,IAAD,CAEEI,UAAWJ,EAAaK,KACxBC,SATa,kBAAMN,EAAaO,YAUhCC,SAAUR,EAAaS,WAAaT,EAAaQ,QACjDE,WAAW,EALb,SAOE,cAACd,EAAD,CACEe,WAAYX,EAAaY,KACzBC,WAAY,SAAAC,GAAI,OACd,eAAC,IAAKC,KAAN,WACE,8BACE,qBAAKC,IAAKF,EAAKG,WAAWC,IAAID,WAAWC,IAAKC,MAAO,CAACC,OAAQ,SAAUC,IAAI,2CAE9E,eAAC7B,EAAD,WACE,4BAAIsB,EAAKG,WAAWK,WACpB,4BAAIC,IAAMT,EAAKU,UAAUC,eAAeC,OAAO,wDAEjD,cAACjC,EAAD,UAAK,cAACC,EAAD,CAAGiC,OAAO,SAASC,KAAMd,EAAKG,WAAWC,IAAID,WAAWC,IAAxD,SAA8DJ,EAAKG,WAAWC,IAAID,WAAWC,QAElG,cAAC,IAAD,CAAQW,KAAK,UAAUC,QAAM,EAACC,QAAS,kBAAM/B,EAAagC,OAAOlB,EAAKmB,KAAtE,4BAVcnB,EAAKmB,KAHzB,SAoBGjC,EAAaS,WAAaT,EAAaQ,SACtC,cAACnB,EAAD,UACE,cAAC,IAAD,aCnECS,UARf,WACE,OACE,mCACE,cAACoC,EAAD","file":"static/js/10.ccb1278a.chunk.js","sourcesContent":["import React, {useEffect} from 'react'\r\nimport useStore from '../stores'\r\nimport {observer} from 'mobx-react'\r\nimport {Button, List, Spin} from 'antd'\r\nimport InfiniteScroll from 'react-infinite-scroller'\r\nimport styled from 'styled-components'\r\nimport dayjs from 'dayjs'\r\n\r\nconst LoadingContainer = styled.div`\r\n  position: absolute;\r\n  bottom: 40px;\r\n  width: 100%;\r\n  text-align: center;\r\n`\r\nconst Message = styled.div`\r\n  position: absolute;\r\n  left: 260px;\r\n`\r\nconst Nav = styled.div`\r\n  width: 600px;\r\n  position: absolute;\r\n  left: 660px;\r\n`\r\nconst A = styled.a`\r\n  display: inline-block;\r\n  width: 600px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`\r\nconst ImgList = styled(List)`\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid #eee;\r\n  padding: 16px 32px;\r\n  overflow: auto;\r\n  height: 800px;\r\n  box-shadow: 0 5px 5px -3px rgb(0 0 0 / 0%), 0 8px 10px 1px rgb(0 0 0 / 0%), 0 3px 14px 2px rgb(0 0 0 / 10%);\r\n  border-radius: 4px;\r\n`\r\n\r\nconst Component = observer(\r\n  () => {\r\n    const {HistoryStore} = useStore()\r\n    const loadMore = () => HistoryStore.pullList()\r\n\r\n    useEffect(() => {\r\n      HistoryStore.reset()\r\n    }, [HistoryStore])\r\n    return (\r\n      <InfiniteScroll\r\n        // initialLoad={true}\r\n        pageStart={HistoryStore.page}\r\n        loadMore={loadMore}\r\n        hasMore={!HistoryStore.isLoading && HistoryStore.hasMore}\r\n        useWindow={false}\r\n      >\r\n        <ImgList\r\n          dataSource={HistoryStore.list}\r\n          renderItem={item => (\r\n            <List.Item key={item.id}>\r\n              <div>\r\n                <img src={item.attributes.url.attributes.url} style={{height: '100px'}} alt=\"图片加载失败\"/>\r\n              </div>\r\n              <Message>\r\n                <p>{item.attributes.filename}</p>\r\n                <p>{dayjs(item.createdAt.toISOString()).format('YYYY年MM月DD日h时m分s秒')}</p>\r\n              </Message>\r\n              <Nav><A target=\"_blank\" href={item.attributes.url.attributes.url}>{item.attributes.url.attributes.url}</A>\r\n              </Nav>\r\n              <Button type=\"primary\" danger onClick={() => HistoryStore.remove(item.id)}>\r\n                删除\r\n              </Button>\r\n            </List.Item>\r\n\r\n          )}\r\n        >\r\n          {HistoryStore.isLoading && HistoryStore.hasMore && (\r\n            <LoadingContainer>\r\n              <Spin/>\r\n            </LoadingContainer>\r\n          )}\r\n        </ImgList>\r\n      </InfiniteScroll>\r\n    )\r\n  })\r\nexport default Component\r\n","import React from 'react'\r\nimport History from '../components/History'\r\n\r\nfunction Component() {\r\n  return (\r\n    <>\r\n      <History/>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Component\r\n"],"sourceRoot":""}